<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="ë‚´ ë§íˆ¬ëŠ” ê¼°ëŒ€ì¼ê¹Œ? AIê°€ ë¶„ì„í•´ì£¼ëŠ” ê¼°ëŒ€ë ¥ í…ŒìŠ¤íŠ¸ ë° ë§íˆ¬ ì„¸íƒê¸°.">
    <meta property="og:title" content="ğŸš¨ AI ê¼°ëŒ€ íŒë…ê¸° & ë§íˆ¬ ì„¸íƒì†Œ">
    <meta property="og:description" content="ë„ˆ Tì•¼? í˜¹ì‹œ ê¼°ëŒ€ì•¼? ë‚´ ë§íˆ¬ ë„£ìœ¼ë©´ AIê°€ íŒ©í­ ë‚ ë ¤ì¤Œ ã…‹ã…‹ã…‹">
    <meta property="og:image" content="https://cdn-icons-png.flaticon.com/512/1611/1611637.png">
    <title>AI ê¼°ëŒ€ íŒë…ê¸° & ë§íˆ¬ ì„¸íƒì†Œ</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>

    <style>
        /* ê¸°ì¡´ ìŠ¤íƒ€ì¼ ê·¸ëŒ€ë¡œ ìœ ì§€ (ìƒëµ ì—†ì´ ì‚¬ìš©í•˜ì„¸ìš”) */
        @font-face { font-family: 'Pretendard-Regular'; src: url('https://cdn.jsdelivr.net/gh/Project-Noonnu/noonfonts_2107@1.1/Pretendard-Regular.woff') format('woff'); font-weight: 400; font-style: normal; }
        body { font-family: 'Pretendard-Regular', sans-serif; background-color: #121212; color: #ffffff; margin: 0; padding: 0; display: flex; flex-direction: column; align-items: center; }
        .container { width: 100%; max-width: 500px; padding: 20px; box-sizing: border-box; text-align: center; min-height: 80vh; }
        h1 { margin-top: 40px; font-size: 2rem; color: #ff5e57; text-shadow: 0 0 10px rgba(255, 94, 87, 0.5); letter-spacing: -1px; }
        .subtitle { color: #888; margin-bottom: 30px; font-size: 1rem; line-height: 1.4; }
        textarea { width: 100%; height: 120px; background: #2c2c2c; border: 2px solid #444; color: #fff; border-radius: 12px; padding: 15px; font-size: 1rem; resize: none; box-sizing: border-box; outline: none; transition: 0.3s; }
        textarea:focus { border-color: #ff5e57; background: #333; }
        .btn-primary { width: 100%; padding: 16px; background: linear-gradient(45deg, #ff5e57, #ff3f34); color: white; border: none; border-radius: 12px; font-size: 1.2rem; font-weight: bold; cursor: pointer; margin-top: 15px; box-shadow: 0 4px 15px rgba(255, 71, 87, 0.4); transition: transform 0.2s; }
        .btn-primary:active { transform: scale(0.96); }
        .btn-primary:disabled { background: #555; cursor: not-allowed; }
        #loadingModal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.85); z-index: 9999; flex-direction: column; align-items: center; justify-content: center; backdrop-filter: blur(5px); }
        .ad-box { background: white; padding: 20px; border-radius: 15px; width: 300px; text-align: center; box-shadow: 0 10px 30px rgba(0,0,0,0.5); animation: popIn 0.3s ease-out; }
        @keyframes popIn { from { transform: scale(0.8); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        #resultArea { display: none; margin-top: 30px; animation: slideUp 0.5s ease-out; }
        @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        .receipt-card { background: #1e1e1e; color: #eee; padding: 25px; border-radius: 16px; position: relative; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5); text-align: left; margin-bottom: 20px; border: 1px solid #333; }
        .receipt-header { text-align: center; border-bottom: 1px solid #333; padding-bottom: 15px; margin-bottom: 20px; }
        .receipt-header h2 { margin: 0; font-size: 1.8rem; font-weight: 900; letter-spacing: -1px; color: #ff5e57; }
        .receipt-date { font-size: 0.8rem; color: #888; margin-top: 5px; }
        .score-row { display: flex; justify-content: space-between; align-items: center; font-size: 1.2rem; font-weight: bold; margin-bottom: 15px; }
        .score-val { color: #d63031; font-size: 1.8rem; text-shadow: 0 0 10px rgba(214, 48, 49, 0.3); }
        .analysis-box { background: #2a2a2a; padding: 15px; margin-bottom: 12px; border-radius: 12px; border: 1px solid #3e3e3e; }
        .label { font-size: 0.75rem; color: #aaa; font-weight: bold; display: block; margin-bottom: 6px; text-transform: uppercase; letter-spacing: 1px; }
        .content { font-size: 1rem; line-height: 1.5; font-weight: 500; word-break: keep-all; color: #fff; }
        .roast-box { background: #2a251a !important; border-color: #ffc107 !important; }
        .roast-text { color: #ffc107; }
        .fix-box { background: #1a2a2a; border: 1px solid #00b894; padding: 15px; border-radius: 12px; margin-top: 12px; }
        .fix-text { color: #55efc4; font-weight: bold; }
        .share-container { display: flex; gap: 10px; margin-bottom: 20px; }
        .share-btn { flex: 1; border: none; border-radius: 10px; padding: 14px 0; font-size: 1rem; cursor: pointer; color: white; display: flex; align-items: center; justify-content: center; gap: 8px; font-weight: bold; }
        .btn-insta { background: linear-gradient(45deg, #f09433, #e6683c, #dc2743, #cc2366, #bc1888); }
        .btn-copy { background: #444; }
        .seo-content { width: 100%; padding: 40px 20px; background: #0a0a0a; color: #444; text-align: left; border-top: 1px solid #222; box-sizing: border-box; margin-top: 50px; }
        footer { padding: 30px; color: #555; font-size: 0.8rem; text-align: center; background: #0a0a0a; width: 100%; box-sizing: border-box;}
    </style>
</head>
<body>

    <div class="container">
        <h1>ğŸš¨ AI ê¼°ëŒ€ íŒë…ê¸°</h1>
        <p class="subtitle">ë„ˆì˜ ì¹´í†¡ ë§íˆ¬, í˜¹ì‹œ ìˆ¨ ë§‰íˆëŠ” ë¶€ì¥ë‹˜?<br>AIê°€ ëƒ‰ì •í•˜ê²Œ íŒë…í•˜ê³  ì„¸íƒí•´ë“œë¦½ë‹ˆë‹¤.</p>
        
        <textarea id="userInput" placeholder="ê²€ì‚¬í•˜ê³  ì‹¶ì€ ì¹´í†¡ ë‚´ìš©ì´ë‚˜ ë©˜íŠ¸ë¥¼ ë¶™ì—¬ë„£ìœ¼ì„¸ìš”. &#13;&#10;(ì˜ˆ: OOì”¨ ì£¼ë§ì— ì‰¬ëŠ”ë° ë¯¸ì•ˆí•œë° ê¸‰í•œ ê±´ì´ë¼...)"></textarea>
        
        <button onclick="analyze()" id="btn" class="btn-primary">âš¡ 5ì´ˆë§Œì— íŒë…í•˜ê¸°</button>

        <div id="resultArea">
            <div class="receipt-card" id="captureTarget">
                <div class="receipt-header">
                    <h2>RESULTS</h2>
                    <div class="receipt-date" id="currentDate"></div>
                </div>
                <div class="score-row">
                    <span>â˜¢ï¸ ê¼°ëŒ€ ë†ë„</span>
                    <span class="score-val" id="score">0%</span>
                </div>
                <div class="analysis-box">
                    <span class="label">YOUR CHARACTER (ë¹„ìœ )</span>
                    <div class="content" id="character">ë¶„ì„ ì¤‘...</div>
                </div>
                <div class="analysis-box roast-box">
                    <span class="label" style="color: #ffc107;">ğŸ’‰ FACT BOMB (íŒ©í­)</span>
                    <div class="content roast-text" id="roast">ë¶„ì„ ì¤‘...</div>
                </div>
                <div class="fix-box">
                    <span class="label" style="color: #55efc4;">âœ¨ AI CLEANING (ì„¸íƒ ì™„ë£Œ)</span>
                    <div class="content fix-text" id="fix">ë¶„ì„ ì¤‘...</div>
                </div>
                <div style="text-align: center; margin-top: 20px; color:#555; font-size: 0.7rem;">AI ê¼°ëŒ€ íŒë…ê¸°</div>
            </div>

            <div class="share-container">
                <button class="share-btn btn-insta" onclick="saveImage()"><i class="fas fa-download"></i> ì´ë¯¸ì§€ ì €ì¥</button>
                <button class="share-btn btn-copy" onclick="copyLink()"><i class="fas fa-link"></i> ì£¼ì†Œ ë³µì‚¬</button>
            </div>

            <a href="https://www.coupang.com/" target="_blank" style="display:block; margin-top:15px; padding:15px; background:#2c2c2c; color:#ddd; text-decoration:none; border-radius:12px; font-size:0.95rem; border:1px solid #444; transition:0.3s;">
                ğŸ¤¯ íŒ©í­ ë§ê³  ì–´ì§ˆì–´ì§ˆí•˜ë‹¤ë©´? <span style="color:#ff5e57; font-weight:bold;">ë‹¬ë‹¬í•œ ê°„ì‹ ë³´ëŸ¬ê°€ê¸° ğŸ‘‰</span>
            </a>
        </div>
    </div>

    <div id="loadingModal">
        <div style="color:white; font-size:1.4rem; margin-bottom:20px; font-weight:bold;">ğŸŒªï¸ AIê°€ ê¼°ëŒ€ë ¥ì„ ë¶„ì„ ì¤‘...</div>
        <div class="ad-box">
            <script src="https://ads-partners.coupang.com/g.js"></script>
            <script>
                // âš ï¸ ì£¼ì˜: ì¿ íŒ¡ íŒŒíŠ¸ë„ˆìŠ¤ ìŠ¹ì¸ëœ ë„ë©”ì¸ì—ì„œë§Œ ë³´ì…ë‹ˆë‹¤
                new PartnersCoupang.G({"id":953674,"template":"carousel","trackingCode":"AF4193966","width":"300","height":"300","tsource":""});
            </script>
            <p style="font-size:1.1rem; font-weight:bold; margin: 15px 0 5px 0; color: black;">ğŸ”¥ ê¸°ë‹¤ë¦¬ëŠ” ë™ì•ˆ íŠ¹ê°€ êµ¬ê²½! ğŸ”¥</p>
        </div>
        <div style="color:#aaa; margin-top:25px; font-size:1rem;">
            ì ì‹œ í›„ ê²°ê³¼ê°€ ë‚˜ì˜µë‹ˆë‹¤... <span id="countdown" style="color:#ff5e57; font-weight:bold;">5</span>
        </div>
    </div>

    <div class="seo-content">
        <h3>ê¼°ëŒ€ íŒë…ê¸° ì‚¬ìš©ë²•</h3>
        <p>ê²°ê³¼ê°€ ë‚˜ì˜¤ë©´ 'ì´ë¯¸ì§€ ì €ì¥' ë²„íŠ¼ì„ ëˆŒëŸ¬ ì¸ìŠ¤íƒ€ê·¸ë¨ ìŠ¤í† ë¦¬ì— ê³µìœ í•˜ê±°ë‚˜, 'ì£¼ì†Œ ë³µì‚¬' ë²„íŠ¼ì„ ëˆŒëŸ¬ ì¹œêµ¬ë“¤ì—ê²Œ í…ŒìŠ¤íŠ¸ë¥¼ ê³µìœ í•´ë³´ì„¸ìš”.</p>
    </div>
    <footer><p>Â© 2025 AI KKondae Scanner. All rights reserved.</p></footer>

    <script>
        // ë‚ ì§œ ì„¸íŒ…
        const now = new Date();
        document.getElementById('currentDate').innerText = `${now.getFullYear()}.${now.getMonth()+1}.${now.getDate()} ë°œí–‰`;

        // 1ï¸âƒ£ ë¶„ì„ í•¨ìˆ˜ (Vercel Serverless í˜¸ì¶œ ë°©ì‹)
        async function analyze() {
            const text = document.getElementById('userInput').value;
            if (!text || text.length < 2) return alert("ë‚´ìš©ì´ ë„ˆë¬´ ì§§ì•„ìš”!");

            const btn = document.getElementById('btn');
            const modal = document.getElementById('loadingModal');
            const resultArea = document.getElementById('resultArea');
            const countdownElem = document.getElementById('countdown');

            btn.disabled = true;
            modal.style.display = 'flex';
            resultArea.style.display = 'none';

            // ì¹´ìš´íŠ¸ë‹¤ìš´
            let timeLeft = 5;
            if(countdownElem) countdownElem.innerText = timeLeft;
            const timer = setInterval(() => {
                timeLeft--;
                if(countdownElem) countdownElem.innerText = timeLeft;
                if (timeLeft <= 0) clearInterval(timer);
            }, 1000);

            try {
                // ğŸ‘‡ ì—¬ê¸°ê°€ í•µì‹¬! êµ¬ê¸€ ëŒ€ì‹  ë‚´ ì„œë²„(api/analyze)ë¡œ ìš”ì²­
                const response = await fetch('/api/analyze', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ text: text }) // í”„ë¡¬í”„íŠ¸ëŠ” ì„œë²„ì—ì„œ ë§Œë“¦
                });

                if (!response.ok) throw new Error("ì„œë²„ ì—°ê²° ì‹¤íŒ¨");
                const result = await response.json();

                // ê²°ê³¼ í‘œì‹œ
                document.getElementById('score').innerText = `${result.score}%`;
                document.getElementById('character').innerText = result.character;
                document.getElementById('roast').innerText = result.roast;
                document.getElementById('fix').innerText = result.fix;

                // ì ìˆ˜ë³„ ìƒ‰ìƒ
                const scoreNum = parseInt(result.score);
                const scoreElem = document.getElementById('score');
                if(scoreNum > 80) scoreElem.style.color = "#ff4757";
                else if(scoreNum > 40) scoreElem.style.color = "#ffa502";
                else scoreElem.style.color = "#2ed573";

                modal.style.display = 'none'; 
                resultArea.style.display = 'block'; 
                resultArea.scrollIntoView({ behavior: 'smooth' });

            } catch (error) {
                alert("ì˜¤ë¥˜: " + error.message);
                modal.style.display = 'none';
            } finally {
                btn.disabled = false;
            }
        }

        // 2ï¸âƒ£ ì´ë¯¸ì§€ ì €ì¥
        function saveImage() {
            const element = document.getElementById('captureTarget');
            html2canvas(element, { scale: 2, backgroundColor: "#1e1e1e" }).then(canvas => {
                const link = document.createElement('a');
                link.download = 'ê¼°ëŒ€ë ¥_ì„±ì í‘œ.png';
                link.href = canvas.toDataURL();
                link.click();
                alert("ì‚¬ì§„ì²©ì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤! ğŸ“¸");
            });
        }

        // 3ï¸âƒ£ ì£¼ì†Œ ë³µì‚¬
        function copyLink() {
            const url = window.location.href;
            navigator.clipboard.writeText(url).then(() => {
                alert("ì£¼ì†Œê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤! ğŸ”—");
            }).catch(err => alert("ë³µì‚¬ ì‹¤íŒ¨: " + err));
        }
    </script>
</body>
</html>